import{d as N,k as W,u as P,r as i,m as T,E as q,n as L,b as r,o as c,c as _,p as X,v as A,f as p,e as a,w as t,F as g,q as V,i as y,g as G,s as H,t as z}from"./index-D2BneEQd.js";import{g as J,c as K}from"./ip-DrwsUnXd.js";import{f as Q}from"./date-CLpD1YEj.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"application-container"},le={class:"form-card"},ae={class:"tag-container"},oe={class:"success-info"},te=N({__name:"index",setup(ne){const C=W();P();const v=i(),f=i(!1),m=i(!1),w=i(""),x=i(!1),d=i([]),b=i();T(()=>{const n=C.query.token;if(!n||!n.startsWith("apply_")){q.error("无效的申请链接");return}x.value=!0});const o=i({name:"",education:"",major:"",writing_experience:"",specialized_content:"",phone_1:"",phone_2:"",alipay_name:"",alipay_account:"",id_number:"",ip_address:"",apply_date:""}),D={name:[{required:!0,message:"请输入姓名",trigger:"blur"}],education:[{required:!0,message:"请选择学历",trigger:"change"}],major:[{required:!0,message:"请输入专业",trigger:"blur"}],writing_experience:[{required:!0,message:"请选择写作水平",trigger:"change"}],id_number:[{required:!0,message:"请输入身份证号",trigger:"blur"},{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"请输入正确的身份证号",trigger:"blur"}],phone_1:[{required:!0,message:"请输入手机号码",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],specialized_content:[{required:!0,message:"请选择擅长内容",trigger:"change"}],apply_date:[{required:!0,message:"请选择申请日期",trigger:"change"}]},j=[{value:"专科",label:"专科"},{value:"本科",label:"本科"},{value:"硕士",label:"硕士"},{value:"博士",label:"博士"}],S=[{value:"大学水平",label:"大学水平"},{value:"在职水平",label:"在职水平"},{value:"事业单位水平",label:"事业单位水平"},{value:"淘宝老手",label:"淘宝老手"},{value:"在职老师",label:"在职老师"},{value:"期刊报告科研",label:"期刊报告科研"}],$=[{value:"ppt制作",label:"PPT制作"},{value:"演讲稿、征文、读后感",label:"演讲稿/征文/读后感"},{value:"公文类、对照材料、生活会、讲话稿，公文材料、研讨材料、领导讲话",label:"公文材料/讲话稿"},{value:"调查报告、学术报告、期刊、研究性文章",label:"报告/期刊/论文"},{value:"广告词、广告语、推文、商业文案",label:"广告/文案"},{value:"商业计划书、策划方案、项目可行性研究报告",label:"计划书/方案"},{value:"保洁、物业、工程、绿化、采购标书",label:"标书类"},{value:"抄写",label:"抄写"}],I=n=>{const e=d.value.indexOf(n);e===-1?d.value.push(n):d.value.splice(e,1),o.value.specialized_content=d.value.join(";")};L(b,n=>{o.value.apply_date=Q(n)});const M=async()=>{if(v.value)try{await v.value.validate(),f.value=!0;const n=await J(),e={...o.value,specialized_content:d.value.join(";"),ip_address:n,apply_date:o.value.apply_date},s=await K(e);w.value=s.data.writer_id,m.value=!0}catch(n){console.error("提交申请失败:",n),q.error("提交失败，请稍后重试")}finally{f.value=!1}},O=()=>{m.value=!1,window.close()};return(n,e)=>{const s=r("el-input"),u=r("el-form-item"),k=r("el-option"),h=r("el-select"),R=r("el-tag"),Y=r("el-date-picker"),U=r("el-button"),B=r("el-form"),E=r("el-icon"),F=r("el-dialog");return c(),_("div",ee,[X(p("div",le,[e[12]||(e[12]=p("h2",null,"写手申请",-1)),a(B,{ref_key:"formRef",ref:v,model:o.value,rules:D,"label-position":"top",class:"application-form"},{default:t(()=>[a(u,{label:"姓名",prop:"name"},{default:t(()=>[a(s,{modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.name=l),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),a(u,{label:"学历",prop:"education"},{default:t(()=>[a(h,{modelValue:o.value.education,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.education=l),placeholder:"请选择学历",style:{width:"100%"}},{default:t(()=>[(c(),_(g,null,V(j,l=>a(k,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"专业",prop:"major"},{default:t(()=>[a(s,{modelValue:o.value.major,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.major=l),placeholder:"请输入专业"},null,8,["modelValue"])]),_:1}),a(u,{label:"写作水平",prop:"writing_experience"},{default:t(()=>[a(h,{modelValue:o.value.writing_experience,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.writing_experience=l),placeholder:"请选择写作水平",style:{width:"100%"}},{default:t(()=>[(c(),_(g,null,V(S,l=>a(k,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"身份证号",prop:"id_number"},{default:t(()=>[a(s,{modelValue:o.value.id_number,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.id_number=l),placeholder:"请输入身份证号",maxlength:"18","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(u,{label:"手机号码1",prop:"phone_1"},{default:t(()=>[a(s,{modelValue:o.value.phone_1,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.phone_1=l),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1}),a(u,{label:"手机号码2",prop:"phone_2"},{default:t(()=>[a(s,{modelValue:o.value.phone_2,"onUpdate:modelValue":e[6]||(e[6]=l=>o.value.phone_2=l),placeholder:"请输入备用手机号码"},null,8,["modelValue"])]),_:1}),a(u,{label:"支付宝姓名",prop:"alipay_name"},{default:t(()=>[a(s,{modelValue:o.value.alipay_name,"onUpdate:modelValue":e[7]||(e[7]=l=>o.value.alipay_name=l),placeholder:"请输入支付宝姓名"},null,8,["modelValue"])]),_:1}),a(u,{label:"支付宝账号",prop:"alipay_account"},{default:t(()=>[a(s,{modelValue:o.value.alipay_account,"onUpdate:modelValue":e[8]||(e[8]=l=>o.value.alipay_account=l),placeholder:"请输入支付宝账号"},null,8,["modelValue"])]),_:1}),a(u,{label:"擅长内容",prop:"specialized_content"},{default:t(()=>[p("div",ae,[(c(),_(g,null,V($,l=>a(R,{key:l.value,type:d.value.includes(l.value)?"primary":"info",class:"specialized-tag",onClick:ue=>I(l.value)},{default:t(()=>[y(z(l.label),1)]),_:2},1032,["type","onClick"])),64))])]),_:1}),a(u,{label:"申请日期",prop:"apply_date"},{default:t(()=>[a(Y,{modelValue:b.value,"onUpdate:modelValue":e[9]||(e[9]=l=>b.value=l),type:"date","value-format":"YYYY-MM-DD",placeholder:"选择日期"},null,8,["modelValue"])]),_:1}),a(u,null,{default:t(()=>[a(U,{type:"primary",class:"submit-btn",onClick:M,loading:f.value},{default:t(()=>e[11]||(e[11]=[y(" 提交申请 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])],512),[[A,x.value]]),a(F,{title:"申请提交成功",modelValue:m.value,"onUpdate:modelValue":e[10]||(e[10]=l=>m.value=l),width:"400px","close-on-click-modal":!1,"show-close":!1},{footer:t(()=>[a(U,{type:"primary",onClick:O},{default:t(()=>e[14]||(e[14]=[y("我已保存")])),_:1})]),default:t(()=>[p("div",oe,[a(E,{class:"success-icon"},{default:t(()=>[a(G(H))]),_:1}),p("h3",null,"您的写手ID："+z(w.value),1),e[13]||(e[13]=p("p",null,"请截图保存此信息",-1))])]),_:1},8,["modelValue"])])}}}),pe=Z(te,[["__scopeId","data-v-0185cfcb"]]);export{pe as default};
//# sourceMappingURL=index-CCWnYhvs.js.map
