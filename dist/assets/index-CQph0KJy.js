import{G as j,d as sa,a as la,r,af as oa,n as na,H as ia,b as f,o as d,c as u,f as t,e as a,w as o,g as c,M as ca,h as b,F as Se,q as ze,x as v,as as z,t as x,at as ra,E as p,ar as da,au as se,V as le,av as Ee,an as De,s as ua,aw as Ie,ax as va,ao as _a,ay as fa,a8 as pa,az as ma,ak as ha,aa as ga,a5 as ya,aA as ba,a3 as wa,i as ka,aB as Ca,A as xa}from"./index-4kIbEQav.js";import{f as oe}from"./format-DZvyx3OM.js";import{_ as Va}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Ta(w){return j({url:"/api/cases",method:"get",params:w})}function Ma(w){return j({url:`/api/cases/${w}`,method:"get"})}function Sa(w){return j({url:"/api/cases",method:"post",data:w,headers:{"Content-Type":"multipart/form-data"}})}function za(w){return j({url:`/api/cases/${w}`,method:"delete"})}const Ea={class:"app-container"},Da={class:"search-area bg-white rounded-lg p-4"},Ia={class:"search-row"},$a={key:0,class:"flex justify-center items-center py-12"},Fa={key:1,class:"flex flex-col justify-center items-center py-20"},Ua={key:2,class:"case-grid"},La=["onClick"],Ra=["onClick"],Ba=["src"],Pa={key:1,class:"no-image"},Aa={key:2,class:"image-count"},Xa=["onClick"],Ya={class:"case-card-header"},ja={class:"flex justify-between items-center mb-2"},Na={class:"case-id"},qa={class:"case-card-title"},Ga={class:"tags-group"},Ja={class:"time-section mb-4"},Ka={class:"time-tag archive-time"},Oa={class:"description-section mb-4"},Wa={class:"description-text"},Ha={class:"users-section"},Qa={class:"users-row"},Za={class:"user-cell"},et={class:"user-info"},at={class:"user-name"},tt={key:0,class:"flex items-center justify-between w-full"},st={class:"text-2xl font-bold"},lt={key:0,class:"drawer-actions"},ot={key:1,class:"flex items-center space-x-4"},nt={key:0,class:"flex justify-center items-center py-12"},it={key:1,class:"case-detail p-6"},ct={key:0,class:"carousel-container"},rt={class:"carousel-image-container"},dt=["src","alt"],ut={class:"image-overlay"},vt={class:"image-viewer-header"},_t={class:"image-counter"},ft={class:"image-actions"},pt={class:"image-viewer-body"},mt={class:"image-container"},ht={key:0,class:"image-loading"},gt=["src"],yt={class:"info-card bg-white rounded-lg shadow-sm mb-6"},bt={class:"card-body p-6"},wt={class:"content-wrapper px-4"},kt={class:"description-content whitespace-pre-line"},Ct={class:"info-card bg-white rounded-lg shadow-sm mb-6"},xt={class:"card-body p-6"},Vt={class:"content-wrapper"},Tt={class:"basic-info-container"},Mt={class:"basic-info-item"},St={class:"info-icon-box"},zt={class:"info-content"},Et={class:"info-value"},Dt={class:"case-number"},It={class:"basic-info-item"},$t={class:"info-icon-box"},Ft={class:"info-content"},Ut={class:"info-value"},Lt={class:"basic-info-item"},Rt={class:"info-icon-box"},Bt={class:"info-content"},Pt={class:"info-value"},At={class:"basic-info-item"},Xt={class:"info-icon-box"},Yt={class:"info-content"},jt={class:"info-value"},Nt={class:"archive-section mt-5"},qt={class:"archive-info-wrapper bg-gray-50 rounded-lg p-5"},Gt={class:"archive-info-grid"},Jt={class:"archive-info-item"},Kt={class:"info-row"},Ot={class:"info-icon-container"},Wt={class:"info-content"},Ht={class:"info-value"},Qt={class:"archive-info-item"},Zt={class:"info-row"},es={class:"info-icon-container"},as={class:"info-content"},ts={class:"info-value user-value"},ss={class:"create-form"},ls=["src"],os={class:"el-upload-list__item-actions"},ns=["onClick"],is={class:"dialog-footer"},cs=sa({__name:"index",setup(w){const ne=la(),ie=r("admin"),ce=oa(()=>{const s=ie.value;return["admin","manager","service","inspector"].includes(s)}),E=r(!1),N=r(!1),q=r(!1),i=r(null),G=r(""),J=r(""),D=r([]),re=s=>({chatScript:"info",chatFeedback:"warning",dealSuccess:"success",dealFailure:"danger"})[s]||"info",de=s=>({chatScript:"聊天话术",chatFeedback:"聊天反馈",dealSuccess:"谈单成功",dealFailure:"谈单失败"})[s]||s,ue=s=>({draft:"info",inProcess:"warning",archived:"success"})[s]||"info",ve=s=>({draft:"草稿",inProcess:"处理中",archived:"已归档"})[s]||s,$e=(s,e)=>s?s.length<=e?s:s.substring(0,e)+"...":"",_e=s=>`https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(s||"未知用户")}`,fe=()=>{E.value=!0,setTimeout(()=>{E.value=!1},500)},pe=s=>{i.value=null,q.value=!0,N.value=!0,Ma(s.id).then(e=>{if(e.data.code===0&&e.data.data){const l=e.data.data;i.value={id:l.id,title:l.title,case_type:l.case_type,status:"archived",content:l.content,description:l.content,created_at:l.created_at,updated_at:l.updated_at,createTime:l.created_at,archiveTime:l.updated_at,creator:l.creator,archiver:l.creator,images:l.images||[]}}else p.error(e.data.message||"获取案例详情失败")}).catch(e=>{console.error("获取案例详情失败:",e),p.error("获取案例详情失败")}).finally(()=>{N.value=!1})},me=()=>{I.value=!0},I=r(!1),y=r({title:"",case_type:"chatScript",content:""}),Fe=r({title:[{required:!0,message:"请输入案例标题",trigger:"blur"}],case_type:[{required:!0,message:"请选择案例类型",trigger:"change"}],content:[{required:!0,message:"请输入案例描述",trigger:"blur"}]}),$=r(null),k=r([]),K=r(!1),Ue=s=>{const e=new FileReader;e.readAsDataURL(s.raw),e.onload=()=>{s.url=e.result},k.value.some(h=>h.uid===s.uid)||k.value.push(s)},he=s=>{k.value=k.value.filter(e=>e.uid!==s.uid)},Le=()=>{p.warning("最多只能上传10张图片!")},Re=s=>["image/jpeg","image/png","image/jpg"].includes(s.type)?s.size/1024/1024<2?!0:(p.error("图片大小不能超过2MB!"),!1):(p.error("只能上传JPG/PNG格式的图片!"),!1),Be=()=>{$.value&&$.value.validate(async s=>{if(s){const e=new FormData;e.append("title",y.value.title),e.append("case_type",y.value.case_type),e.append("content",y.value.content),k.value.length>0&&k.value.forEach(l=>{e.append("images",l.raw)}),K.value=!0;try{const l=await Sa(e);l.data.code===0?(p.success("案例创建成功"),I.value=!1,ge(),Pe()):p.error(l.data.message||"创建失败")}catch(l){console.error("创建案例失败:",l),p.error(l.message||"提交失败，请重试")}finally{K.value=!1}}})},Pe=()=>{$.value&&$.value.resetFields(),k.value=[],y.value={title:"",case_type:"chatScript",content:""}},ge=async()=>{var s;E.value=!0;try{const e=await Ta({case_type:J.value,keyword:G.value,page:1,pageSize:20});e.data.code===0?D.value=(((s=e.data.data)==null?void 0:s.list)||[]).map(l=>({...l,id:l.id||`CASE-${Math.floor(Math.random()*1e4)}`,title:l.title||"无标题案例",case_type:l.case_type||"chatScript",status:"archived",description:l.content||"无描述信息",createTime:l.created_at||new Date().toISOString(),archiveTime:l.updated_at||l.created_at,creator:l.creator||{id:0,name:"未知用户"},archiver:l.creator||null,images:Array.isArray(l.images)?l.images:[]})):p.error(e.data.message||"获取案例列表失败")}catch(e){console.error("获取案例列表失败:",e),p.error("获取案例列表失败")}finally{E.value=!1}};na(()=>{var s,e;(e=(s=ne.userInfo)==null?void 0:s.role)!=null&&e.role_name&&(ie.value=ne.userInfo.role.role_name),ge()});const O=r(!1),ye=s=>{xa.confirm(`确定要删除案例"${s.title}"吗？删除后将无法恢复。`,"删除确认",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}).then(()=>{Ae(s.id)}).catch(()=>{})},Ae=async s=>{O.value=!0;try{const e=await za(s);e.data.code===0?(p.success("删除成功"),D.value=D.value.filter(l=>l.id!==s)):p.error(e.data.message||"删除失败")}catch(e){console.error("删除案例失败:",e),p.error(e.message||"删除失败，请重试")}finally{O.value=!1}},L=r(!1),m=r(0),C=r(""),V=r(1),R=r(0),W=r(null),be=r(0),Xe=r(0),T=r(0),B=r(!1),F=r(!1),we=r({}),H=(s,e)=>{if(!s||s.length===0)return;[e,(e+1)%s.length,(e-1+s.length)%s.length].forEach(h=>{const _=s[h];if(_&&!we.value[_]){const U=new Image;U.src=_,U.onload=()=>{we.value[_]=!0}}})},Ye=s=>{var e,l,h;m.value=s,L.value=!0,F.value=!0,C.value=((l=(e=i.value)==null?void 0:e.images)==null?void 0:l[m.value])||"",V.value=1,R.value=0,(h=i.value)!=null&&h.images&&H(i.value.images,m.value),setTimeout(()=>{W.value&&W.value.focus(),document.addEventListener("keydown",Z)},100)},Q=()=>{L.value=!1,document.removeEventListener("keydown",Z)},Z=s=>{if(L.value)switch(s.key){case"ArrowLeft":ee();break;case"ArrowRight":ae();break;case"Escape":Q();break;case"+":P();break;case"-":A();break;case"r":ke();break}},je=s=>{s.preventDefault(),s.deltaY<0?P():s.deltaY>0&&A()},P=()=>{V.value=Math.min(V.value+.1,3)},A=()=>{V.value=Math.max(V.value-.1,.5)},ke=()=>{R.value=(R.value+90)%360},ee=()=>{var s;!((s=i.value)!=null&&s.images)||i.value.images.length<=1||(F.value=!0,m.value=(m.value-1+i.value.images.length)%i.value.images.length,C.value=i.value.images[m.value]||"",H(i.value.images,m.value))},ae=()=>{var s;!((s=i.value)!=null&&s.images)||i.value.images.length<=1||(F.value=!0,m.value=(m.value+1)%i.value.images.length,C.value=i.value.images[m.value]||"",H(i.value.images,m.value))},Ne=()=>{F.value=!1},qe=()=>{if(C.value)try{const s=document.createElement("a");s.href=C.value;const e=C.value.split("/").pop()||`case_image_${Date.now()}.jpg`;s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),p({type:"success",message:"图片下载已开始"})}catch(s){console.error("下载图片失败:",s),p({type:"error",message:"下载图片失败"})}},Ge=s=>{if(s.touches.length===1)be.value=s.touches[0].clientX,Xe.value=s.touches[0].clientY,B.value=!0;else if(s.touches.length===2){const e=s.touches[0].clientX-s.touches[1].clientX,l=s.touches[0].clientY-s.touches[1].clientY;T.value=Math.sqrt(e*e+l*l)}},Je=s=>{if(B.value){if(s.touches.length===1){const e=s.touches[0].clientX;s.touches[0].clientY;const l=e-be.value;Math.abs(l)>50&&(l>0?ee():ae(),B.value=!1)}else if(s.touches.length===2){const e=s.touches[0].clientX-s.touches[1].clientX,l=s.touches[0].clientY-s.touches[1].clientY,h=Math.sqrt(e*e+l*l);if(T.value>0){const _=h/T.value;_>1.05?(P(),T.value=h):_<.95&&(A(),T.value=h)}}}},Ke=()=>{B.value=!1,T.value=0};return ia(()=>{document.removeEventListener("keydown",Z)}),(s,e)=>{var xe;const l=f("el-icon"),h=f("el-input"),_=f("el-option"),U=f("el-select"),g=f("el-button"),Oe=f("el-empty"),M=f("el-tooltip"),X=f("el-tag"),Ce=f("el-avatar"),We=f("el-carousel-item"),He=f("el-carousel"),Qe=f("el-drawer"),Y=f("el-form-item"),Ze=f("el-upload"),ea=f("el-form"),aa=f("el-dialog");return d(),u("div",Ea,[t("div",Da,[t("div",Ia,[a(h,{modelValue:G.value,"onUpdate:modelValue":e[0]||(e[0]=n=>G.value=n),placeholder:"搜索案例...",class:"search-input",size:"large",onKeyup:ca(fe,["enter"])},{prefix:o(()=>[a(l,{class:"text-gray-400"},{default:o(()=>[a(c(da))]),_:1})]),_:1},8,["modelValue"]),a(U,{modelValue:J.value,"onUpdate:modelValue":e[1]||(e[1]=n=>J.value=n),placeholder:"所有案例类型",class:"filter-select",size:"large",onChange:fe},{default:o(()=>[a(_,{label:"所有类型",value:""}),a(_,{label:"聊天话术",value:"chatScript"}),a(_,{label:"聊天反馈",value:"chatFeedback"}),a(_,{label:"谈单成功",value:"dealSuccess"}),a(_,{label:"谈单失败",value:"dealFailure"})]),_:1},8,["modelValue"]),a(g,{type:"primary",onClick:me,class:"create-button",size:"large"},{default:o(()=>e[10]||(e[10]=[b(" 新建案例 ")])),_:1})])]),E.value?(d(),u("div",$a,[a(l,{class:"is-loading"},{default:o(()=>[a(c(se))]),_:1})])):D.value.length===0?(d(),u("div",Fa,[a(Oe,{description:"暂无案例"}),a(g,{type:"primary",onClick:me,class:"mt-4"},{default:o(()=>e[11]||(e[11]=[b("新建案例")])),_:1})])):(d(),u("div",Ua,[(d(!0),u(Se,null,ze(D.value,n=>(d(),u("div",{key:n.id,class:"case-card bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow duration-300"},[ce.value?(d(),u("div",{key:0,class:"delete-button",onClick:z(S=>ye(n),["stop"])},[a(M,{content:"删除案例",placement:"top"},{default:o(()=>[a(l,null,{default:o(()=>[a(c(le))]),_:1})]),_:1})],8,La)):x("",!0),t("div",{class:"case-card-image-wrapper",onClick:S=>pe(n)},[n.images&&n.images.length>0?(d(),u("img",{key:0,src:n.images[0],class:"case-card-image",alt:"案例图片"},null,8,Ba)):(d(),u("div",Pa,[a(l,null,{default:o(()=>[a(c(Ee))]),_:1}),e[12]||(e[12]=t("span",null,"暂无图片",-1))])),n.images&&n.images.length>1?(d(),u("div",Aa,[a(l,null,{default:o(()=>[a(c(Ee))]),_:1}),t("span",null,v(n.images.length),1)])):x("",!0)],8,Ra),t("div",{class:"case-card-content",onClick:S=>pe(n)},[t("div",Ya,[t("div",ja,[t("span",Na,"#"+v(n.id),1),a(X,{type:ue(n.status),effect:"light",size:"small",class:"status-tag"},{default:o(()=>[b(v(ve(n.status)),1)]),_:2},1032,["type"])]),t("h3",qa,v(n.title),1),t("div",Ga,[a(X,{type:re(n.case_type),effect:"light",class:"category-tag"},{default:o(()=>[b(v(de(n.case_type)),1)]),_:2},1032,["type"])])]),t("div",Ja,[t("div",Ka,[a(l,{class:"mr-1"},{default:o(()=>[a(c(De))]),_:1}),t("span",null,v(n.status==="archived"?`归档: ${c(oe)(n.archiveTime)}`:"待归档"),1)])]),t("div",Oa,[t("p",Wa,v($e(n.description,100)),1)]),t("div",Ha,[t("div",Qa,[t("div",Za,[e[13]||(e[13]=t("span",{class:"user-label"},"归档人:",-1)),t("div",et,[a(Ce,{size:24,src:_e(n.archiver?n.archiver.name:n.creator?n.creator.name:"未知用户"),class:"user-avatar"},null,8,["src"]),t("span",at,v(n.archiver?n.archiver.name:n.status==="archived"?"未知":"待定"),1)])])])])],8,Xa)]))),128))])),a(Qe,{modelValue:q.value,"onUpdate:modelValue":e[4]||(e[4]=n=>q.value=n),title:((xe=i.value)==null?void 0:xe.title)||"案例详情",size:"60%","destroy-on-close":!0},{header:o(()=>[i.value?(d(),u("div",tt,[t("h2",st,v(i.value.title),1),ce.value?(d(),u("div",lt,[a(g,{type:"danger",size:"small",plain:"",onClick:e[2]||(e[2]=z(n=>ye(i.value),["stop"])),loading:O.value},{default:o(()=>[a(l,{class:"mr-1"},{default:o(()=>[a(c(le))]),_:1}),e[14]||(e[14]=b(" 删除案例 "))]),_:1},8,["loading"])])):x("",!0)])):(d(),u("div",ot,e[15]||(e[15]=[t("h2",{class:"text-2xl font-bold"},"加载中...",-1)])))]),default:o(()=>{var n,S,Ve,Te,Me;return[N.value?(d(),u("div",nt,[a(l,{class:"is-loading"},{default:o(()=>[a(c(se))]),_:1})])):i.value?(d(),u("div",it,[i.value.images&&i.value.images.length>0?(d(),u("div",ct,[a(He,{height:"400px","indicator-position":"outside",interval:4e3,arrow:"always",type:"card"},{default:o(()=>[(d(!0),u(Se,null,ze(i.value.images,(ta,te)=>(d(),ua(We,{key:te,onClick:rs=>Ye(te)},{default:o(()=>[t("div",rt,[t("img",{src:ta,class:"carousel-image",alt:`案例图片${te+1}`},null,8,dt),t("div",ut,[a(l,null,{default:o(()=>[a(c(Ie))]),_:1}),e[16]||(e[16]=t("span",null,"点击查看大图",-1))])])]),_:2},1032,["onClick"]))),128))]),_:1})])):x("",!0),L.value?(d(),u("div",{key:1,class:"image-viewer-container",onClick:Q,tabindex:"0",ref_key:"imageViewerRef",ref:W,onTouchstart:Ge,onTouchmove:Je,onTouchend:Ke},[t("div",{class:"image-viewer-content",onClick:e[3]||(e[3]=z(()=>{},["stop"]))},[t("div",vt,[t("span",_t,v(m.value+1)+" / "+v((S=(n=i.value)==null?void 0:n.images)==null?void 0:S.length),1),t("div",ft,[a(M,{content:"放大 (+)",placement:"bottom"},{default:o(()=>[a(g,{circle:"",plain:"",size:"small",onClick:P},{default:o(()=>[a(l,null,{default:o(()=>[a(c(Ie))]),_:1})]),_:1})]),_:1}),a(M,{content:"缩小 (-)",placement:"bottom"},{default:o(()=>[a(g,{circle:"",plain:"",size:"small",onClick:A},{default:o(()=>[a(l,null,{default:o(()=>[a(c(va))]),_:1})]),_:1})]),_:1}),a(M,{content:"旋转 (R)",placement:"bottom"},{default:o(()=>[a(g,{circle:"",plain:"",size:"small",onClick:ke},{default:o(()=>[a(l,null,{default:o(()=>[a(c(_a))]),_:1})]),_:1})]),_:1}),a(M,{content:"下载图片",placement:"bottom"},{default:o(()=>[a(g,{circle:"",plain:"",size:"small",onClick:qe},{default:o(()=>[a(l,null,{default:o(()=>[a(c(fa))]),_:1})]),_:1})]),_:1}),a(M,{content:"关闭 (ESC)",placement:"bottom"},{default:o(()=>[a(g,{circle:"",plain:"",size:"small",onClick:Q},{default:o(()=>[a(l,null,{default:o(()=>[a(c(pa))]),_:1})]),_:1})]),_:1})])]),t("div",pt,[a(g,{onClick:z(ee,["stop"]),circle:"",plain:"",class:"nav-button prev-button",disabled:m.value===0},{default:o(()=>[a(l,null,{default:o(()=>[a(c(ma))]),_:1})]),_:1},8,["disabled"]),t("div",mt,[F.value?(d(),u("div",ht,[a(l,{class:"loading-icon"},{default:o(()=>[a(c(se))]),_:1}),e[17]||(e[17]=t("span",null,"加载中...",-1))])):x("",!0),t("img",{src:C.value,alt:"大图预览",class:"preview-image",style:ra({transform:`scale(${V.value}) rotate(${R.value}deg)`}),onWheel:je,onLoad:Ne},null,44,gt)]),a(g,{onClick:z(ae,["stop"]),circle:"",plain:"",class:"nav-button next-button",disabled:m.value===(((Te=(Ve=i.value)==null?void 0:Ve.images)==null?void 0:Te.length)||0)-1},{default:o(()=>[a(l,null,{default:o(()=>[a(c(ha))]),_:1})]),_:1},8,["disabled"])]),e[18]||(e[18]=t("div",{class:"keyboard-tips"}," 键盘快捷键: ← 上一张 | → 下一张 | + 放大 | - 缩小 | R 旋转 | ESC 关闭 ",-1))])],544)):x("",!0),t("div",yt,[e[19]||(e[19]=t("div",{class:"card-header py-4 px-6 border-b border-gray-200"},[t("h3",{class:"section-title"},"案例描述")],-1)),t("div",bt,[t("div",wt,[t("p",kt,v(i.value.description),1)])])]),t("div",Ct,[e[27]||(e[27]=t("div",{class:"card-header py-4 px-6 border-b border-gray-200"},[t("h3",{class:"section-title"},"基本信息")],-1)),t("div",xt,[t("div",Vt,[t("div",Tt,[t("div",Mt,[t("div",St,[a(l,null,{default:o(()=>[a(c(ga))]),_:1})]),t("div",zt,[e[20]||(e[20]=t("div",{class:"info-label"},"案例编号",-1)),t("div",Et,[t("span",Dt,v(i.value.id),1)])])]),t("div",It,[t("div",$t,[a(l,null,{default:o(()=>[a(c(ya))]),_:1})]),t("div",Ft,[e[21]||(e[21]=t("div",{class:"info-label"},"案例类型",-1)),t("div",Ut,[a(X,{type:re(i.value.case_type),class:"case-type-tag"},{default:o(()=>[b(v(de(i.value.case_type)),1)]),_:1},8,["type"])])])]),t("div",Lt,[t("div",Rt,[a(l,null,{default:o(()=>[a(c(ba))]),_:1})]),t("div",Bt,[e[22]||(e[22]=t("div",{class:"info-label"},"归档状态",-1)),t("div",Pt,[a(X,{type:ue(i.value.status),class:"status-tag"},{default:o(()=>[b(v(ve(i.value.status)),1)]),_:1},8,["type"])])])]),t("div",At,[t("div",Xt,[a(l,null,{default:o(()=>[a(c(wa))]),_:1})]),t("div",Yt,[e[23]||(e[23]=t("div",{class:"info-label"},"创建时间",-1)),t("div",jt,v(c(oe)(i.value.createTime)),1)])])]),t("div",Nt,[e[26]||(e[26]=t("div",{class:"card-section-title mb-4"},"归档信息",-1)),t("div",qt,[t("div",Gt,[t("div",Jt,[t("div",Kt,[t("div",Ot,[a(l,{class:"info-icon"},{default:o(()=>[a(c(De))]),_:1})]),t("div",Wt,[e[24]||(e[24]=t("div",{class:"info-label"},"归档时间",-1)),t("div",Ht,v(i.value.status==="archived"?c(oe)(i.value.archiveTime):"待归档"),1)])])]),t("div",Qt,[t("div",Zt,[t("div",es,[a(l,{class:"info-icon"},{default:o(()=>[a(c(ka))]),_:1})]),t("div",as,[e[25]||(e[25]=t("div",{class:"info-label"},"归档人",-1)),t("div",ts,[a(Ce,{size:24,src:_e(i.value.archiver?i.value.archiver.name:((Me=i.value.creator)==null?void 0:Me.name)||"未知用户")},null,8,["src"]),t("span",null,v(i.value.archiver?i.value.archiver.name:i.value.status==="archived"?"未知":"待定"),1)])])])])])])])])])])])):x("",!0)]}),_:1},8,["modelValue","title"]),a(aa,{modelValue:I.value,"onUpdate:modelValue":e[9]||(e[9]=n=>I.value=n),title:"新建案例",width:"700px","destroy-on-close":!0},{footer:o(()=>[t("div",is,[a(g,{onClick:e[8]||(e[8]=n=>I.value=!1)},{default:o(()=>e[29]||(e[29]=[b("取消")])),_:1}),a(g,{type:"primary",onClick:Be,loading:K.value},{default:o(()=>e[30]||(e[30]=[b("创建案例")])),_:1},8,["loading"])])]),default:o(()=>[t("div",ss,[a(ea,{model:y.value,"label-position":"top",rules:Fe.value,ref_key:"createFormRef",ref:$},{default:o(()=>[a(Y,{label:"案例标题",prop:"title"},{default:o(()=>[a(h,{modelValue:y.value.title,"onUpdate:modelValue":e[5]||(e[5]=n=>y.value.title=n),placeholder:"请输入案例标题"},null,8,["modelValue"])]),_:1}),a(Y,{label:"案例类型",prop:"case_type"},{default:o(()=>[a(U,{modelValue:y.value.case_type,"onUpdate:modelValue":e[6]||(e[6]=n=>y.value.case_type=n),placeholder:"请选择案例类型",class:"w-full"},{default:o(()=>[a(_,{label:"聊天话术",value:"chatScript"}),a(_,{label:"聊天反馈",value:"chatFeedback"}),a(_,{label:"谈单成功",value:"dealSuccess"}),a(_,{label:"谈单失败",value:"dealFailure"})]),_:1},8,["modelValue"])]),_:1}),a(Y,{label:"案例描述",prop:"content"},{default:o(()=>[a(h,{modelValue:y.value.content,"onUpdate:modelValue":e[7]||(e[7]=n=>y.value.content=n),type:"textarea",rows:6,placeholder:"请输入案例描述"},null,8,["modelValue"])]),_:1}),a(Y,{label:"上传图片（可选，最多10张，每张不超过2MB）"},{default:o(()=>[a(Ze,{action:"#","list-type":"picture-card","auto-upload":!1,limit:10,"file-list":k.value,"on-change":Ue,"on-remove":he,"on-exceed":Le,"before-upload":Re},{file:o(({file:n})=>[t("div",null,[t("img",{class:"el-upload-list__item-thumbnail",src:n.url,alt:""},null,8,ls),t("div",os,[t("span",{class:"el-upload-list__item-delete",onClick:z(S=>he(n),["stop"])},[a(l,null,{default:o(()=>[a(c(le))]),_:1})],8,ns)])])]),default:o(()=>[a(l,null,{default:o(()=>[a(c(Ca))]),_:1})]),_:1},8,["file-list"]),e[28]||(e[28]=t("div",{class:"upload-tips text-sm text-gray-500 mt-2"},[t("p",null,"* 支持PNG、JPG、JPEG格式，每张图片大小不超过2MB"),t("p",null,"* 最多可上传10张图片")],-1))]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])])}}}),_s=Va(cs,[["__scopeId","data-v-931cbd94"]]);export{_s as default};
//# sourceMappingURL=index-CQph0KJy.js.map
