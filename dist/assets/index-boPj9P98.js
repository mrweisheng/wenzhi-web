import{d as b,u as y,a as V,r as f,b as l,o as k,c as S,e,w as t,f as h,g as _,h as I,l as C,i as R,j as U,E as B}from"./index-D2BneEQd.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"login-container"},N=b({__name:"index",setup(T){const g=y(),c=V(),d=f(),i=f(!1),a=f({username:"",password:""}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},w=async()=>{if(d.value){await d.value.validate();try{i.value=!0;const{data:r}=await U(a.value),o=r.data,{token:n,refreshToken:u,expires:s,userInfo:p}=o;c.setToken(n,u,s),c.setUserInfo({...p,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),B.success("登录成功"),g.push("/dashboard")}catch(r){console.error("Login failed:",r)}finally{i.value=!1}}};return(r,o)=>{const n=l("el-icon"),u=l("el-input"),s=l("el-form-item"),p=l("el-button"),x=l("el-form");return k(),S("div",E,[e(x,{ref_key:"formRef",ref:d,model:a.value,rules:v,class:"login-form"},{default:t(()=>[o[3]||(o[3]=h("h3",{class:"title"},"文知管理系统",-1)),e(s,{prop:"username"},{default:t(()=>[e(u,{modelValue:a.value.username,"onUpdate:modelValue":o[0]||(o[0]=m=>a.value.username=m),placeholder:"用户名",type:"text"},{prefix:t(()=>[e(n,null,{default:t(()=>[e(_(I))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,{prop:"password"},{default:t(()=>[e(u,{modelValue:a.value.password,"onUpdate:modelValue":o[1]||(o[1]=m=>a.value.password=m),placeholder:"密码",type:"password"},{prefix:t(()=>[e(n,null,{default:t(()=>[e(_(C))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(p,{loading:i.value,type:"primary",style:{width:"100%"},onClick:w},{default:t(()=>o[2]||(o[2]=[R(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}}),O=D(N,[["__scopeId","data-v-dab2dbb7"]]);export{O as default};
//# sourceMappingURL=index-boPj9P98.js.map
