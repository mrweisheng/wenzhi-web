import{x as e,r as a,c as l,k as s,S as t,ag as i,y as c,z as n,A as u,P as o,H as r,u as d,a5 as v,L as m,O as p,a4 as f,M as g,V as h,K as y,D as _,G as b}from"./vendor-BVd4RN3d.js";import{E as k,X as w,Y as x,o as C,Z as V,U as S,_ as z,$ as T,V as j,a0 as E,G as F,a1 as M,S as $,J as U,D as Y,a2 as P,B as R,u as A,a3 as D,a as G}from"./element-plus-CCDyQ1z5.js";import{f as L}from"./format-B5gz6Uyj.js";import{s as X,u as B}from"./index-CFSbY6bd.js";import{_ as I}from"./_plugin-vue_export-helper-BCo6x5W8.js";const q={class:"app-container"},J={class:"search-area bg-white rounded-lg p-4"},K={class:"search-row"},N={key:0,class:"flex justify-center items-center py-12"},O={key:1,class:"flex flex-col justify-center items-center py-20"},H={key:2,class:"case-grid"},W=["onClick"],Z=["onClick"],Q=["src"],ee={key:1,class:"no-image"},ae={key:2,class:"image-count"},le=["onClick"],se={class:"case-card-header"},te={class:"flex justify-between items-center mb-2"},ie={class:"case-id"},ce={class:"case-card-title"},ne={class:"tags-group"},ue={class:"time-section mb-4"},oe={class:"time-tag archive-time"},re={class:"description-section mb-4"},de={class:"description-text"},ve={class:"users-section"},me={class:"users-row"},pe={class:"user-cell"},fe={class:"user-info"},ge={class:"user-name"},he={key:0,class:"flex items-center justify-between w-full"},ye={class:"text-2xl font-bold"},_e={key:0,class:"drawer-actions"},be={key:1,class:"flex items-center space-x-4"},ke={key:0,class:"flex justify-center items-center py-12"},we={key:1,class:"case-detail p-6"},xe={key:0,class:"carousel-container"},Ce={class:"carousel-image-container"},Ve=["src","alt"],Se={class:"image-overlay"},ze={class:"image-viewer-header"},Te={class:"image-counter"},je={class:"image-actions"},Ee={class:"image-viewer-body"},Fe={class:"image-container"},Me={key:0,class:"image-loading"},$e=["src"],Ue={class:"info-card bg-white rounded-lg shadow-sm mb-6"},Ye={class:"card-body p-6"},Pe={class:"content-wrapper px-4"},Re={class:"description-content whitespace-pre-line"},Ae={class:"info-card bg-white rounded-lg shadow-sm mb-6"},De={class:"card-body p-6"},Ge={class:"content-wrapper"},Le={class:"basic-info-container"},Xe={class:"basic-info-item"},Be={class:"info-icon-box"},Ie={class:"info-content"},qe={class:"info-value"},Je={class:"case-number"},Ke={class:"basic-info-item"},Ne={class:"info-icon-box"},Oe={class:"info-content"},He={class:"info-value"},We={class:"basic-info-item"},Ze={class:"info-icon-box"},Qe={class:"info-content"},ea={class:"info-value"},aa={class:"basic-info-item"},la={class:"info-icon-box"},sa={class:"info-content"},ta={class:"info-value"},ia={class:"archive-section mt-5"},ca={class:"archive-info-wrapper bg-gray-50 rounded-lg p-5"},na={class:"archive-info-grid"},ua={class:"archive-info-item"},oa={class:"info-row"},ra={class:"info-icon-container"},da={class:"info-content"},va={class:"info-value"},ma={class:"archive-info-item"},pa={class:"info-row"},fa={class:"info-icon-container"},ga={class:"info-content"},ha={class:"info-value user-value"},ya={class:"create-form"},_a=["src"],ba={class:"el-upload-list__item-actions"},ka=["onClick"],wa={class:"dialog-footer"},xa=I(e({__name:"index",setup(e){const I=B(),xa=a("admin"),Ca=l((()=>{const e=xa.value;return["admin","manager","service","inspector"].includes(e)})),Va=a(!1),Sa=a(!1),za=a(!1),Ta=a(null),ja=a(""),Ea=a(""),Fa=a([]),Ma=e=>({chatScript:"info",chatFeedback:"warning",dealSuccess:"success",dealFailure:"danger"}[e]||"info"),$a=e=>({chatScript:"聊天话术",chatFeedback:"聊天反馈",dealSuccess:"谈单成功",dealFailure:"谈单失败"}[e]||e),Ua=e=>({draft:"info",inProcess:"warning",archived:"success"}[e]||"info"),Ya=e=>({draft:"草稿",inProcess:"处理中",archived:"已归档"}[e]||e),Pa=e=>`https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(e||"未知用户")}`,Ra=()=>{Va.value=!0,setTimeout((()=>{Va.value=!1}),500)},Aa=e=>{var a;Ta.value=null,za.value=!0,Sa.value=!0,(a=e.id,X({url:`/api/cases/${a}`,method:"get"})).then((e=>{if(0===e.data.code&&e.data.data){const a=e.data.data;Ta.value={id:a.id,title:a.title,case_type:a.case_type,status:"archived",content:a.content,description:a.content,created_at:a.created_at,updated_at:a.updated_at,createTime:a.created_at,archiveTime:a.updated_at,creator:a.creator,archiver:a.creator,images:a.images||[]}}else k.error(e.data.message||"获取案例详情失败")})).catch((e=>{k.error("获取案例详情失败")})).finally((()=>{Sa.value=!1}))},Da=()=>{Ga.value=!0},Ga=a(!1),La=a({title:"",case_type:"chatScript",content:""}),Xa=a({title:[{required:!0,message:"请输入案例标题",trigger:"blur"}],case_type:[{required:!0,message:"请选择案例类型",trigger:"change"}],content:[{required:!0,message:"请输入案例描述",trigger:"blur"}]}),Ba=a(null),Ia=a([]),qa=a(!1),Ja=e=>{const a=new FileReader;a.readAsDataURL(e.raw),a.onload=()=>{e.url=a.result};Ia.value.some((a=>a.uid===e.uid))||Ia.value.push(e)},Ka=e=>{Ia.value=Ia.value.filter((a=>a.uid!==e.uid))},Na=()=>{k.warning("最多只能上传10张图片!")},Oa=e=>{if(!["image/jpeg","image/png","image/jpg"].includes(e.type))return k.error("只能上传JPG/PNG格式的图片!"),!1;return!!(e.size/1024/1024<2)||(k.error("图片大小不能超过2MB!"),!1)},Ha=()=>{Ba.value&&Ba.value.validate((async e=>{if(e){const e=new FormData;e.append("title",La.value.title),e.append("case_type",La.value.case_type),e.append("content",La.value.content),Ia.value.length>0&&Ia.value.forEach((a=>{e.append("images",a.raw)})),qa.value=!0;try{const l=await(a=e,X({url:"/api/cases",method:"post",data:a,headers:{"Content-Type":"multipart/form-data"}}));0===l.data.code?(k.success("案例创建成功"),Ga.value=!1,Za(),Wa()):k.error(l.data.message||"创建失败")}catch(l){k.error(l.message||"提交失败，请重试")}finally{qa.value=!1}}var a}))},Wa=()=>{Ba.value&&Ba.value.resetFields(),Ia.value=[],La.value={title:"",case_type:"chatScript",content:""}},Za=async()=>{var e,a;Va.value=!0;try{const l=await(a={case_type:Ea.value,keyword:ja.value,page:1,pageSize:20},X({url:"/api/cases",method:"get",params:a}));0===l.data.code?Fa.value=((null==(e=l.data.data)?void 0:e.list)||[]).map((e=>({...e,id:e.id||`CASE-${Math.floor(1e4*Math.random())}`,title:e.title||"无标题案例",case_type:e.case_type||"chatScript",status:"archived",description:e.content||"无描述信息",createTime:e.created_at||(new Date).toISOString(),archiveTime:e.updated_at||e.created_at,creator:e.creator||{id:0,name:"未知用户"},archiver:e.creator||null,images:Array.isArray(e.images)?e.images:[]}))):k.error(l.data.message||"获取案例列表失败")}catch(l){k.error("获取案例列表失败")}finally{Va.value=!1}};s((()=>{var e,a;(null==(a=null==(e=I.userInfo)?void 0:e.role)?void 0:a.role_name)&&(xa.value=I.userInfo.role.role_name),Za()}));const Qa=a(!1),el=e=>{G.confirm(`确定要删除案例"${e.title}"吗？删除后将无法恢复。`,"删除确认",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}).then((()=>{al(e.id)})).catch((()=>{}))},al=async e=>{Qa.value=!0;try{const a=await function(e){return X({url:`/api/cases/${e}`,method:"delete"})}(e);0===a.data.code?(k.success("删除成功"),Fa.value=Fa.value.filter((a=>a.id!==e))):k.error(a.data.message||"删除失败")}catch(a){k.error(a.message||"删除失败，请重试")}finally{Qa.value=!1}},ll=a(!1),sl=a(0),tl=a(""),il=a(1),cl=a(0),nl=a(null),ul=a(0),ol=a(0),rl=a(0),dl=a(!1),vl=a(!1),ml=a({}),pl=(e,a)=>{if(!e||0===e.length)return;[a,(a+1)%e.length,(a-1+e.length)%e.length].forEach((a=>{const l=e[a];if(l&&!ml.value[l]){const e=new Image;e.src=l,e.onload=()=>{ml.value[l]=!0}}}))},fl=()=>{ll.value=!1,document.removeEventListener("keydown",gl)},gl=e=>{if(ll.value)switch(e.key){case"ArrowLeft":kl();break;case"ArrowRight":wl();break;case"Escape":fl();break;case"+":yl();break;case"-":_l();break;case"r":bl()}},hl=e=>{e.preventDefault(),e.deltaY<0?yl():e.deltaY>0&&_l()},yl=()=>{il.value=Math.min(il.value+.1,3)},_l=()=>{il.value=Math.max(il.value-.1,.5)},bl=()=>{cl.value=(cl.value+90)%360},kl=()=>{var e;!(null==(e=Ta.value)?void 0:e.images)||Ta.value.images.length<=1||(vl.value=!0,sl.value=(sl.value-1+Ta.value.images.length)%Ta.value.images.length,tl.value=Ta.value.images[sl.value]||"",pl(Ta.value.images,sl.value))},wl=()=>{var e;!(null==(e=Ta.value)?void 0:e.images)||Ta.value.images.length<=1||(vl.value=!0,sl.value=(sl.value+1)%Ta.value.images.length,tl.value=Ta.value.images[sl.value]||"",pl(Ta.value.images,sl.value))},xl=()=>{vl.value=!1},Cl=()=>{if(tl.value)try{const e=document.createElement("a");e.href=tl.value;const a=tl.value.split("/").pop()||`case_image_${Date.now()}.jpg`;e.download=a,document.body.appendChild(e),e.click(),document.body.removeChild(e),k({type:"success",message:"图片下载已开始"})}catch(e){k({type:"error",message:"下载图片失败"})}},Vl=e=>{if(1===e.touches.length)ul.value=e.touches[0].clientX,ol.value=e.touches[0].clientY,dl.value=!0;else if(2===e.touches.length){const a=e.touches[0].clientX-e.touches[1].clientX,l=e.touches[0].clientY-e.touches[1].clientY;rl.value=Math.sqrt(a*a+l*l)}},Sl=e=>{if(dl.value)if(1===e.touches.length){const a=e.touches[0].clientX;e.touches[0].clientY;const l=a-ul.value;Math.abs(l)>50&&(l>0?kl():wl(),dl.value=!1)}else if(2===e.touches.length){const a=e.touches[0].clientX-e.touches[1].clientX,l=e.touches[0].clientY-e.touches[1].clientY,s=Math.sqrt(a*a+l*l);if(rl.value>0){const e=s/rl.value;e>1.05?(yl(),rl.value=s):e<.95&&(_l(),rl.value=s)}}},zl=()=>{dl.value=!1,rl.value=0};return t((()=>{document.removeEventListener("keydown",gl)})),(e,a)=>{var l;const s=i("el-icon"),t=i("el-input"),k=i("el-option"),G=i("el-select"),X=i("el-button"),B=i("el-empty"),I=i("el-tooltip"),xa=i("el-tag"),Wa=i("el-avatar"),Za=i("el-carousel-item"),al=i("el-carousel"),ul=i("el-drawer"),ol=i("el-form-item"),rl=i("el-upload"),dl=i("el-form"),ml=i("el-dialog");return c(),n("div",q,[u("div",J,[u("div",K,[o(t,{modelValue:ja.value,"onUpdate:modelValue":a[0]||(a[0]=e=>ja.value=e),placeholder:"搜索案例...",class:"search-input",size:"large",onKeyup:v(Ra,["enter"])},{prefix:r((()=>[o(s,{class:"text-gray-400"},{default:r((()=>[o(d(w))])),_:1})])),_:1},8,["modelValue"]),o(G,{modelValue:Ea.value,"onUpdate:modelValue":a[1]||(a[1]=e=>Ea.value=e),placeholder:"所有案例类型",class:"filter-select",size:"large",onChange:Ra},{default:r((()=>[o(k,{label:"所有类型",value:""}),o(k,{label:"聊天话术",value:"chatScript"}),o(k,{label:"聊天反馈",value:"chatFeedback"}),o(k,{label:"谈单成功",value:"dealSuccess"}),o(k,{label:"谈单失败",value:"dealFailure"})])),_:1},8,["modelValue"]),o(X,{type:"primary",onClick:Da,class:"create-button",size:"large"},{default:r((()=>a[10]||(a[10]=[m(" 新建案例 ")]))),_:1})])]),Va.value?(c(),n("div",N,[o(s,{class:"is-loading"},{default:r((()=>[o(d(x))])),_:1})])):0===Fa.value.length?(c(),n("div",O,[o(B,{description:"暂无案例"}),o(X,{type:"primary",onClick:Da,class:"mt-4"},{default:r((()=>a[11]||(a[11]=[m("新建案例")]))),_:1})])):(c(),n("div",H,[(c(!0),n(p,null,f(Fa.value,(e=>{return c(),n("div",{key:e.id,class:"case-card bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow duration-300"},[Ca.value?(c(),n("div",{key:0,class:"delete-button",onClick:h((a=>el(e)),["stop"])},[o(I,{content:"删除案例",placement:"top"},{default:r((()=>[o(s,null,{default:r((()=>[o(d(C))])),_:1})])),_:1})],8,W)):y("",!0),u("div",{class:"case-card-image-wrapper",onClick:a=>Aa(e)},[e.images&&e.images.length>0?(c(),n("img",{key:0,src:e.images[0],class:"case-card-image",alt:"案例图片"},null,8,Q)):(c(),n("div",ee,[o(s,null,{default:r((()=>[o(d(V))])),_:1}),a[12]||(a[12]=u("span",null,"暂无图片",-1))])),e.images&&e.images.length>1?(c(),n("div",ae,[o(s,null,{default:r((()=>[o(d(V))])),_:1}),u("span",null,g(e.images.length),1)])):y("",!0)],8,Z),u("div",{class:"case-card-content",onClick:a=>Aa(e)},[u("div",se,[u("div",te,[u("span",ie,"#"+g(e.id),1),o(xa,{type:Ua(e.status),effect:"light",size:"small",class:"status-tag"},{default:r((()=>[m(g(Ya(e.status)),1)])),_:2},1032,["type"])]),u("h3",ce,g(e.title),1),u("div",ne,[o(xa,{type:Ma(e.case_type),effect:"light",class:"category-tag"},{default:r((()=>[m(g($a(e.case_type)),1)])),_:2},1032,["type"])])]),u("div",ue,[u("div",oe,[o(s,{class:"mr-1"},{default:r((()=>[o(d(S))])),_:1}),u("span",null,g("archived"===e.status?`归档: ${d(L)(e.archiveTime)}`:"待归档"),1)])]),u("div",re,[u("p",de,g((l=e.description,t=100,l?l.length<=t?l:l.substring(0,t)+"...":"")),1)]),u("div",ve,[u("div",me,[u("div",pe,[a[13]||(a[13]=u("span",{class:"user-label"},"归档人:",-1)),u("div",fe,[o(Wa,{size:24,src:Pa(e.archiver?e.archiver.name:e.creator?e.creator.name:"未知用户"),class:"user-avatar"},null,8,["src"]),u("span",ge,g(e.archiver?e.archiver.name:"archived"===e.status?"未知":"待定"),1)])])])])],8,le)]);var l,t})),128))])),o(ul,{modelValue:za.value,"onUpdate:modelValue":a[4]||(a[4]=e=>za.value=e),title:(null==(l=Ta.value)?void 0:l.title)||"案例详情",size:"60%","destroy-on-close":!0},{header:r((()=>[Ta.value?(c(),n("div",he,[u("h2",ye,g(Ta.value.title),1),Ca.value?(c(),n("div",_e,[o(X,{type:"danger",size:"small",plain:"",onClick:a[2]||(a[2]=h((e=>el(Ta.value)),["stop"])),loading:Qa.value},{default:r((()=>[o(s,{class:"mr-1"},{default:r((()=>[o(d(C))])),_:1}),a[14]||(a[14]=m(" 删除案例 "))])),_:1},8,["loading"])])):y("",!0)])):(c(),n("div",be,a[15]||(a[15]=[u("h2",{class:"text-2xl font-bold"},"加载中...",-1)])))])),default:r((()=>{var e,l,t,i,v;return[Sa.value?(c(),n("div",ke,[o(s,{class:"is-loading"},{default:r((()=>[o(d(x))])),_:1})])):Ta.value?(c(),n("div",we,[Ta.value.images&&Ta.value.images.length>0?(c(),n("div",xe,[o(al,{height:"400px","indicator-position":"outside",interval:4e3,arrow:"always",type:"card"},{default:r((()=>[(c(!0),n(p,null,f(Ta.value.images,((e,l)=>(c(),b(Za,{key:l,onClick:e=>(e=>{var a,l,s;sl.value=e,ll.value=!0,vl.value=!0,tl.value=(null==(l=null==(a=Ta.value)?void 0:a.images)?void 0:l[sl.value])||"",il.value=1,cl.value=0,(null==(s=Ta.value)?void 0:s.images)&&pl(Ta.value.images,sl.value),setTimeout((()=>{nl.value&&nl.value.focus(),document.addEventListener("keydown",gl)}),100)})(l)},{default:r((()=>[u("div",Ce,[u("img",{src:e,class:"carousel-image",alt:`案例图片${l+1}`},null,8,Ve),u("div",Se,[o(s,null,{default:r((()=>[o(d(z))])),_:1}),a[16]||(a[16]=u("span",null,"点击查看大图",-1))])])])),_:2},1032,["onClick"])))),128))])),_:1})])):y("",!0),ll.value?(c(),n("div",{key:1,class:"image-viewer-container",onClick:fl,tabindex:"0",ref_key:"imageViewerRef",ref:nl,onTouchstart:Vl,onTouchmove:Sl,onTouchend:zl},[u("div",{class:"image-viewer-content",onClick:a[3]||(a[3]=h((()=>{}),["stop"]))},[u("div",ze,[u("span",Te,g(sl.value+1)+" / "+g(null==(l=null==(e=Ta.value)?void 0:e.images)?void 0:l.length),1),u("div",je,[o(I,{content:"放大 (+)",placement:"bottom"},{default:r((()=>[o(X,{circle:"",plain:"",size:"small",onClick:yl},{default:r((()=>[o(s,null,{default:r((()=>[o(d(z))])),_:1})])),_:1})])),_:1}),o(I,{content:"缩小 (-)",placement:"bottom"},{default:r((()=>[o(X,{circle:"",plain:"",size:"small",onClick:_l},{default:r((()=>[o(s,null,{default:r((()=>[o(d(T))])),_:1})])),_:1})])),_:1}),o(I,{content:"旋转 (R)",placement:"bottom"},{default:r((()=>[o(X,{circle:"",plain:"",size:"small",onClick:bl},{default:r((()=>[o(s,null,{default:r((()=>[o(d(j))])),_:1})])),_:1})])),_:1}),o(I,{content:"下载图片",placement:"bottom"},{default:r((()=>[o(X,{circle:"",plain:"",size:"small",onClick:Cl},{default:r((()=>[o(s,null,{default:r((()=>[o(d(E))])),_:1})])),_:1})])),_:1}),o(I,{content:"关闭 (ESC)",placement:"bottom"},{default:r((()=>[o(X,{circle:"",plain:"",size:"small",onClick:fl},{default:r((()=>[o(s,null,{default:r((()=>[o(d(F))])),_:1})])),_:1})])),_:1})])]),u("div",Ee,[o(X,{onClick:h(kl,["stop"]),circle:"",plain:"",class:"nav-button prev-button",disabled:0===sl.value},{default:r((()=>[o(s,null,{default:r((()=>[o(d(M))])),_:1})])),_:1},8,["disabled"]),u("div",Fe,[vl.value?(c(),n("div",Me,[o(s,{class:"loading-icon"},{default:r((()=>[o(d(x))])),_:1}),a[17]||(a[17]=u("span",null,"加载中...",-1))])):y("",!0),u("img",{src:tl.value,alt:"大图预览",class:"preview-image",style:_({transform:`scale(${il.value}) rotate(${cl.value}deg)`}),onWheel:hl,onLoad:xl},null,44,$e)]),o(X,{onClick:h(wl,["stop"]),circle:"",plain:"",class:"nav-button next-button",disabled:sl.value===((null==(i=null==(t=Ta.value)?void 0:t.images)?void 0:i.length)||0)-1},{default:r((()=>[o(s,null,{default:r((()=>[o(d($))])),_:1})])),_:1},8,["disabled"])]),a[18]||(a[18]=u("div",{class:"keyboard-tips"}," 键盘快捷键: ← 上一张 | → 下一张 | + 放大 | - 缩小 | R 旋转 | ESC 关闭 ",-1))])],544)):y("",!0),u("div",Ue,[a[19]||(a[19]=u("div",{class:"card-header py-4 px-6 border-b border-gray-200"},[u("h3",{class:"section-title"},"案例描述")],-1)),u("div",Ye,[u("div",Pe,[u("p",Re,g(Ta.value.description),1)])])]),u("div",Ae,[a[27]||(a[27]=u("div",{class:"card-header py-4 px-6 border-b border-gray-200"},[u("h3",{class:"section-title"},"基本信息")],-1)),u("div",De,[u("div",Ge,[u("div",Le,[u("div",Xe,[u("div",Be,[o(s,null,{default:r((()=>[o(d(U))])),_:1})]),u("div",Ie,[a[20]||(a[20]=u("div",{class:"info-label"},"案例编号",-1)),u("div",qe,[u("span",Je,g(Ta.value.id),1)])])]),u("div",Ke,[u("div",Ne,[o(s,null,{default:r((()=>[o(d(Y))])),_:1})]),u("div",Oe,[a[21]||(a[21]=u("div",{class:"info-label"},"案例类型",-1)),u("div",He,[o(xa,{type:Ma(Ta.value.case_type),class:"case-type-tag"},{default:r((()=>[m(g($a(Ta.value.case_type)),1)])),_:1},8,["type"])])])]),u("div",We,[u("div",Ze,[o(s,null,{default:r((()=>[o(d(P))])),_:1})]),u("div",Qe,[a[22]||(a[22]=u("div",{class:"info-label"},"归档状态",-1)),u("div",ea,[o(xa,{type:Ua(Ta.value.status),class:"status-tag"},{default:r((()=>[m(g(Ya(Ta.value.status)),1)])),_:1},8,["type"])])])]),u("div",aa,[u("div",la,[o(s,null,{default:r((()=>[o(d(R))])),_:1})]),u("div",sa,[a[23]||(a[23]=u("div",{class:"info-label"},"创建时间",-1)),u("div",ta,g(d(L)(Ta.value.createTime)),1)])])]),u("div",ia,[a[26]||(a[26]=u("div",{class:"card-section-title mb-4"},"归档信息",-1)),u("div",ca,[u("div",na,[u("div",ua,[u("div",oa,[u("div",ra,[o(s,{class:"info-icon"},{default:r((()=>[o(d(S))])),_:1})]),u("div",da,[a[24]||(a[24]=u("div",{class:"info-label"},"归档时间",-1)),u("div",va,g("archived"===Ta.value.status?d(L)(Ta.value.archiveTime):"待归档"),1)])])]),u("div",ma,[u("div",pa,[u("div",fa,[o(s,{class:"info-icon"},{default:r((()=>[o(d(A))])),_:1})]),u("div",ga,[a[25]||(a[25]=u("div",{class:"info-label"},"归档人",-1)),u("div",ha,[o(Wa,{size:24,src:Pa(Ta.value.archiver?Ta.value.archiver.name:(null==(v=Ta.value.creator)?void 0:v.name)||"未知用户")},null,8,["src"]),u("span",null,g(Ta.value.archiver?Ta.value.archiver.name:"archived"===Ta.value.status?"未知":"待定"),1)])])])])])])])])])])])):y("",!0)]})),_:1},8,["modelValue","title"]),o(ml,{modelValue:Ga.value,"onUpdate:modelValue":a[9]||(a[9]=e=>Ga.value=e),title:"新建案例",width:"700px","destroy-on-close":!0},{footer:r((()=>[u("div",wa,[o(X,{onClick:a[8]||(a[8]=e=>Ga.value=!1)},{default:r((()=>a[29]||(a[29]=[m("取消")]))),_:1}),o(X,{type:"primary",onClick:Ha,loading:qa.value},{default:r((()=>a[30]||(a[30]=[m("创建案例")]))),_:1},8,["loading"])])])),default:r((()=>[u("div",ya,[o(dl,{model:La.value,"label-position":"top",rules:Xa.value,ref_key:"createFormRef",ref:Ba},{default:r((()=>[o(ol,{label:"案例标题",prop:"title"},{default:r((()=>[o(t,{modelValue:La.value.title,"onUpdate:modelValue":a[5]||(a[5]=e=>La.value.title=e),placeholder:"请输入案例标题"},null,8,["modelValue"])])),_:1}),o(ol,{label:"案例类型",prop:"case_type"},{default:r((()=>[o(G,{modelValue:La.value.case_type,"onUpdate:modelValue":a[6]||(a[6]=e=>La.value.case_type=e),placeholder:"请选择案例类型",class:"w-full"},{default:r((()=>[o(k,{label:"聊天话术",value:"chatScript"}),o(k,{label:"聊天反馈",value:"chatFeedback"}),o(k,{label:"谈单成功",value:"dealSuccess"}),o(k,{label:"谈单失败",value:"dealFailure"})])),_:1},8,["modelValue"])])),_:1}),o(ol,{label:"案例描述",prop:"content"},{default:r((()=>[o(t,{modelValue:La.value.content,"onUpdate:modelValue":a[7]||(a[7]=e=>La.value.content=e),type:"textarea",rows:6,placeholder:"请输入案例描述"},null,8,["modelValue"])])),_:1}),o(ol,{label:"上传图片（可选，最多10张，每张不超过2MB）"},{default:r((()=>[o(rl,{action:"#","list-type":"picture-card","auto-upload":!1,limit:10,"file-list":Ia.value,"on-change":Ja,"on-remove":Ka,"on-exceed":Na,"before-upload":Oa},{file:r((({file:e})=>[u("div",null,[u("img",{class:"el-upload-list__item-thumbnail",src:e.url,alt:""},null,8,_a),u("div",ba,[u("span",{class:"el-upload-list__item-delete",onClick:h((a=>Ka(e)),["stop"])},[o(s,null,{default:r((()=>[o(d(C))])),_:1})],8,ka)])])])),default:r((()=>[o(s,null,{default:r((()=>[o(d(D))])),_:1})])),_:1},8,["file-list"]),a[28]||(a[28]=u("div",{class:"upload-tips text-sm text-gray-500 mt-2"},[u("p",null,"* 支持PNG、JPG、JPEG格式，每张图片大小不超过2MB"),u("p",null,"* 最多可上传10张图片")],-1))])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-931cbd94"]]);export{xa as default};
