import{d as y,u as V,a as k,r as m,b as l,o as b,c as S,e,w as t,f as h,g as _,h as I,l as C,E as R,i as U,j as B}from"./index-4kIbEQav.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"login-container"},N=y({__name:"index",setup(T){const g=V(),c=k(),d=m(),i=m(!1),a=m({username:"",password:""}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},w=async()=>{if(d.value){await d.value.validate();try{i.value=!0;const{data:r}=await C(a.value),o=r.data,{token:n,refreshToken:u,expires:s,userInfo:f}=o;c.setToken(n,u,s),c.setUserInfo({...f,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),R.success("登录成功"),g.push("/dashboard")}catch(r){console.error("Login failed:",r)}finally{i.value=!1}}};return(r,o)=>{const n=l("el-icon"),u=l("el-input"),s=l("el-form-item"),f=l("el-button"),x=l("el-form");return b(),S("div",E,[e(x,{ref_key:"formRef",ref:d,model:a.value,rules:v,class:"login-form"},{default:t(()=>[o[3]||(o[3]=h("h3",{class:"title"},"文知管理系统",-1)),e(s,{prop:"username"},{default:t(()=>[e(u,{modelValue:a.value.username,"onUpdate:modelValue":o[0]||(o[0]=p=>a.value.username=p),placeholder:"用户名",type:"text"},{prefix:t(()=>[e(n,null,{default:t(()=>[e(_(U))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,{prop:"password"},{default:t(()=>[e(u,{modelValue:a.value.password,"onUpdate:modelValue":o[1]||(o[1]=p=>a.value.password=p),placeholder:"密码",type:"password"},{prefix:t(()=>[e(n,null,{default:t(()=>[e(_(B))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(f,{loading:i.value,type:"primary",style:{width:"100%"},onClick:w},{default:t(()=>o[2]||(o[2]=[I(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}}),O=D(N,[["__scopeId","data-v-0f892f6e"]]);export{O as default};
//# sourceMappingURL=index-DZVj9Kiz.js.map
