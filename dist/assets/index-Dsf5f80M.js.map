{"version":3,"file":"index-Dsf5f80M.js","sources":["../../src/api/statistics.ts","../../src/views/dashboard/index.vue"],"sourcesContent":["import request from '@/utils/request'\r\n\r\nexport function getStatistics() {\r\n  return request({\r\n    url: '/api/statistics',\r\n    method: 'get'\r\n  })\r\n} ","<template>\r\n  <div class=\"dashboard-container\">\r\n    <!-- 数据卡片 -->\r\n    <div class=\"stats-grid\">\r\n      <div class=\"stats-card users\" v-loading=\"loading\">\r\n        <div class=\"icon-wrapper\">\r\n          <el-icon><User /></el-icon>\r\n        </div>\r\n        <div class=\"content\">\r\n          <div class=\"number\">{{ statistics.userCount }}</div>\r\n          <div class=\"label\">用户总数</div>\r\n        </div>\r\n        <div class=\"bg-icon\">\r\n          <el-icon><User /></el-icon>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"stats-card writers\" v-loading=\"loading\">\r\n        <div class=\"icon-wrapper\">\r\n          <el-icon><Edit /></el-icon>\r\n        </div>\r\n        <div class=\"content\">\r\n          <div class=\"number\">{{ statistics.writerCount }}</div>\r\n          <div class=\"label\">写手总数</div>\r\n        </div>\r\n        <div class=\"bg-icon\">\r\n          <el-icon><Edit /></el-icon>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"stats-card orders\" v-loading=\"loading\">\r\n        <div class=\"icon-wrapper\">\r\n          <el-icon><ShoppingCart /></el-icon>\r\n        </div>\r\n        <div class=\"content\">\r\n          <div class=\"number\">{{ statistics.orderCount }}</div>\r\n          <div class=\"label\">订单总数</div>\r\n        </div>\r\n        <div class=\"bg-icon\">\r\n          <el-icon><ShoppingCart /></el-icon>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"stats-card roles\" v-loading=\"loading\">\r\n        <div class=\"icon-wrapper\">\r\n          <el-icon><UserFilled /></el-icon>\r\n        </div>\r\n        <div class=\"content\">\r\n          <div class=\"number\">{{ statistics.roleCount }}</div>\r\n          <div class=\"label\">角色总数</div>\r\n        </div>\r\n        <div class=\"bg-icon\">\r\n          <el-icon><UserFilled /></el-icon>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"stats-card menus\" v-loading=\"loading\">\r\n        <div class=\"icon-wrapper\">\r\n          <el-icon><Menu /></el-icon>\r\n        </div>\r\n        <div class=\"content\">\r\n          <div class=\"number\">{{ statistics.menuCount }}</div>\r\n          <div class=\"label\">菜单总数</div>\r\n        </div>\r\n        <div class=\"bg-icon\">\r\n          <el-icon><Menu /></el-icon>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 欢迎信息 -->\r\n    <div class=\"welcome-section\">\r\n      <div class=\"welcome-card\">\r\n        <div class=\"welcome-content\">\r\n          <h2>欢迎回来, {{ userStore.userInfo?.username }}!</h2>\r\n          <p>今天是 {{ currentDate }}, {{ getGreeting() }}</p>\r\n        </div>\r\n        <div class=\"decoration\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted } from 'vue'\r\nimport { useUserStore } from '@/stores/user'\r\nimport { getStatistics } from '@/api/statistics'\r\nimport type { Statistics } from '@/types/statistics'\r\nimport { User, Edit, ShoppingCart, UserFilled, Menu } from '@element-plus/icons-vue'\r\n\r\nconst userStore = useUserStore()\r\nconst loading = ref(false)\r\nconst statistics = ref<Statistics>({\r\n  userCount: 0,\r\n  menuCount: 0,\r\n  roleCount: 0,\r\n  writerCount: 0,\r\n  orderCount: 0\r\n})\r\n\r\n// 获取当前日期\r\nconst currentDate = new Date().toLocaleDateString('zh-CN', {\r\n  year: 'numeric',\r\n  month: 'long',\r\n  day: 'numeric',\r\n  weekday: 'long'\r\n})\r\n\r\n// 根据时间获取问候语\r\nconst getGreeting = () => {\r\n  const hour = new Date().getHours()\r\n  if (hour < 6) return '凌晨好'\r\n  if (hour < 9) return '早上好'\r\n  if (hour < 12) return '上午好'\r\n  if (hour < 14) return '中午好'\r\n  if (hour < 17) return '下午好'\r\n  if (hour < 19) return '傍晚好'\r\n  return '晚上好'\r\n}\r\n\r\n// 获取统计数据\r\nconst fetchStatistics = async () => {\r\n  try {\r\n    loading.value = true\r\n    const res = await getStatistics()\r\n    statistics.value = res.data\r\n  } catch (error) {\r\n    console.error('获取统计数据失败:', error)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  fetchStatistics()\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.dashboard-container {\r\n  padding: 20px;\r\n  \r\n  .stats-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));\r\n    gap: 20px;\r\n    margin-bottom: 20px;\r\n\r\n    .stats-card {\r\n      position: relative;\r\n      padding: 24px;\r\n      border-radius: 12px;\r\n      overflow: hidden;\r\n      background: white;\r\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\r\n      transition: transform 0.3s, box-shadow 0.3s;\r\n\r\n      &:hover {\r\n        transform: translateY(-5px);\r\n        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);\r\n      }\r\n\r\n      .icon-wrapper {\r\n        position: relative;\r\n        z-index: 2;\r\n        width: 48px;\r\n        height: 48px;\r\n        border-radius: 12px;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        margin-bottom: 16px;\r\n\r\n        .el-icon {\r\n          font-size: 24px;\r\n          color: white;\r\n        }\r\n      }\r\n\r\n      .content {\r\n        position: relative;\r\n        z-index: 2;\r\n\r\n        .number {\r\n          font-size: 32px;\r\n          font-weight: 600;\r\n          margin-bottom: 8px;\r\n          background: linear-gradient(45deg, #2c3e50, #3498db);\r\n          -webkit-background-clip: text;\r\n          -webkit-text-fill-color: transparent;\r\n        }\r\n\r\n        .label {\r\n          font-size: 16px;\r\n          color: #666;\r\n        }\r\n      }\r\n\r\n      .bg-icon {\r\n        position: absolute;\r\n        right: -20px;\r\n        bottom: -20px;\r\n        font-size: 120px;\r\n        opacity: 0.1;\r\n        transform: rotate(-15deg);\r\n      }\r\n\r\n      &.users .icon-wrapper { background: linear-gradient(135deg, #FF6B6B, #FF8E8E); }\r\n      &.writers .icon-wrapper { background: linear-gradient(135deg, #4ECDC4, #45B7AF); }\r\n      &.orders .icon-wrapper { background: linear-gradient(135deg, #FFD93D, #FFE566); }\r\n      &.roles .icon-wrapper { background: linear-gradient(135deg, #6C5CE7, #8983F3); }\r\n      &.menus .icon-wrapper { background: linear-gradient(135deg, #A8E6CF, #DCEDC1); }\r\n    }\r\n  }\r\n\r\n  .welcome-section {\r\n    .welcome-card {\r\n      position: relative;\r\n      padding: 30px;\r\n      border-radius: 12px;\r\n      background: white;\r\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\r\n      overflow: hidden;\r\n\r\n      .welcome-content {\r\n        position: relative;\r\n        z-index: 2;\r\n\r\n        h2 {\r\n          margin: 0 0 12px;\r\n          font-size: 24px;\r\n          background: linear-gradient(45deg, #2c3e50, #3498db);\r\n          -webkit-background-clip: text;\r\n          -webkit-text-fill-color: transparent;\r\n        }\r\n\r\n        p {\r\n          margin: 0;\r\n          color: #666;\r\n          font-size: 16px;\r\n        }\r\n      }\r\n\r\n      .decoration {\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n        width: 200px;\r\n        height: 200px;\r\n        background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(44, 62, 80, 0.1));\r\n        border-radius: 50%;\r\n        transform: translate(30%, -30%);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// 响应式调整\r\n@media screen and (max-width: 768px) {\r\n  .dashboard-container {\r\n    padding: 10px;\r\n\r\n    .stats-grid {\r\n      grid-template-columns: 1fr;\r\n    }\r\n  }\r\n}\r\n</style> "],"names":["getStatistics","request","userStore","useUserStore","loading","ref","statistics","currentDate","getGreeting","hour","fetchStatistics","res","error","onMounted"],"mappings":"oOAEO,SAASA,GAAgB,CAC9B,OAAOC,EAAQ,CACb,IAAK,kBACL,OAAQ,KAAA,CACT,CACH,+uBCmFA,MAAMC,EAAYC,EAAa,EACzBC,EAAUC,EAAI,EAAK,EACnBC,EAAaD,EAAgB,CACjC,UAAW,EACX,UAAW,EACX,UAAW,EACX,YAAa,EACb,WAAY,CAAA,CACb,EAGKE,EAAc,IAAI,KAAK,EAAE,mBAAmB,QAAS,CACzD,KAAM,UACN,MAAO,OACP,IAAK,UACL,QAAS,MAAA,CACV,EAGKC,EAAc,IAAM,CACxB,MAAMC,EAAO,IAAI,KAAK,EAAE,SAAS,EAC7B,OAAAA,EAAO,EAAU,MACjBA,EAAO,EAAU,MACjBA,EAAO,GAAW,MAClBA,EAAO,GAAW,MAClBA,EAAO,GAAW,MAClBA,EAAO,GAAW,MACf,KACT,EAGMC,EAAkB,SAAY,CAC9B,GAAA,CACFN,EAAQ,MAAQ,GACV,MAAAO,EAAM,MAAMX,EAAc,EAChCM,EAAW,MAAQK,EAAI,WAChBC,EAAO,CACN,QAAA,MAAM,YAAaA,CAAK,CAAA,QAChC,CACAR,EAAQ,MAAQ,EAAA,CAEpB,EAEA,OAAAS,EAAU,IAAM,CACEH,EAAA,CAAA,CACjB"}